/**
 *------
 * BGA framework: © Gregory Isabelli <gisabelli@boardgamearena.com> & Emmanuel Colin <ecolin@boardgamearena.com>
 * SevenWondersDuel implementation : © Koen Heltzel <koenheltzel@gmail.com>
 *
 * This code has been produced on the BGA studio platform for use on http://boardgamearena.com.
 * See http://en.boardgamearena.com/#!doc/Studio for more information.
 * -----
 *
 * sevenwondersduel.css
 *
 * SevenWondersDuel stylesheet
 *
 */

/*
    This is the CSS stylesheet of your game User Interface.
    
    Styles defined on this file will be applied to the HTML elements you define in your
    HTML template (sevenwondersduel_sevenwondersduel.tpl), and to HTML elements you create dynamically
    (in sevenwondersduel.js).
    
    Usually, you are using CSS to:
    
    1°) define the overall layout of your game
        (ex: place the board on the top left, place player's hand beside, place the deck on the right, ...).

    2°) create your CSS-sprites:
        All images of your games should be gathered into a small number of image files. Then, using
        background-image and background-position CSS properties, you create HTML blocks that can 
        display these images correctly (see example below).
    
    3°) ... anything else:
        It is really easy to add and remove CSS classes dynamically from your Javascript with
        dojo.addClass and dojo.removeClass. It is also easy to check if an element has a class
        (dojo.hasClass) or to get all elements with a specific class (dojo.query). This is why,
        very often, using CSS classes for the logic of your user interface allow you to do complex
        thing easily.
        
        
     Note: on the production platform, this file will be compressed and comments will be removed.
           Consequently, don't hesitate to put as many comments as necessary.
*/


/* Note: you must not use any @import directive */


/********* You can start writing your CSS below this line: **********/


/*
__     __         _       _     _
\ \   / /_ _ _ __(_) __ _| |__ | | ___  ___
 \ \ / / _` | '__| |/ _` | '_ \| |/ _ \/ __|
  \ V / (_| | |  | | (_| | |_) | |  __/\__ \
   \_/ \__,_|_|  |_|\__,_|_.__/|_|\___||___/
*/

:root {
    --scale: 1.0;
    --element-scale: 1.0;
    --gutter: calc(7.5px * var(--scale));

    --building-spritesheet-width: 2080px;
    --building-spritesheet-height: 2568px;
    --building-spritesheet-columns: 10;
    --building-spritesheet-rows: 8;
    --building-width: calc(var(--building-spritesheet-width) / var(--building-spritesheet-columns));
    --building-height: calc(var(--building-spritesheet-height) / var(--building-spritesheet-rows));
    --building-small-scale: calc(0.5 * var(--scale));
    --building-small-width: calc(var(--building-width) * var(--building-small-scale));
    --building-small-height: calc(var(--building-height) * var(--building-small-scale));
    --building-header-small-height: calc(62px * var(--building-small-scale));

    --wonder-spritesheet-width: 1845px;
    --wonder-spritesheet-height: 720px;
    --wonder-spritesheet-columns: 5;
    --wonder-spritesheet-rows: 3;
    --wonder-width: calc(var(--wonder-spritesheet-width) / var(--wonder-spritesheet-columns));
    --wonder-height: calc(var(--wonder-spritesheet-height) / var(--wonder-spritesheet-rows));
    --wonder-border-radius: 15px;
    --wonder-small-scale: calc(0.58 * var(--scale));
    --wonder-plus-age-card-scale: 1.1;

    --progress-token-spritesheet-width: 800px;
    --progress-token-spritesheet-height: 600px;
    --progress-token-spritesheet-columns: 4;
    --progress-token-spritesheet-rows: 3;
    --progress-token-width: calc(var(--progress-token-spritesheet-width) / var(--progress-token-spritesheet-columns));
    --progress-token-height: calc(var(--progress-token-spritesheet-height) / var(--progress-token-spritesheet-rows));
    --progress-token-small-scale: calc(0.4 * (0.5 / 0.63) * var(--scale)); /* (0.5 / 0.63) Because board used to be scale 0.63 and now is 0.5 */

    --linked-building-icon-spritesheet-width: 288px;
    --linked-building-icon-spritesheet-height: 64px;
    --linked-building-icon-spritesheet-columns: 9;
    --linked-building-icon-spritesheet-rows: 2;
    --linked-building-icon-width: calc(var(--linked-building-icon-spritesheet-width) / var(--linked-building-icon-spritesheet-columns));
    --linked-building-icon-height: calc(var(--linked-building-icon-spritesheet-height) / var(--linked-building-icon-spritesheet-rows));
    --linked-building-icon-small-scale: calc(0.45 * var(--scale));

    --board-width: 400px;
    --board-height: 1440px;
    --board-scale: calc(0.5 * var(--scale));

    --small-border-radius: 7px;

    --draftpool-row-height-multiplier: 0.536;
    --draftpool-column-width: calc(var(--building-width) * var(--building-small-scale) * 0.6);
    --draftpool-row-height: calc(var(--building-height) * var(--building-small-scale) * var(--draftpool-row-height-multiplier));

    --military-track-header: 0.0464;
    --military-track-body: 0.87;
    --conflict-pawn-position: 0; /* -9 to 9 */
}

/*
  ____                           _
 / ___| ___ _ __   ___ _ __ __ _| |
| |  _ / _ \ '_ \ / _ \ '__/ _` | |
| |_| |  __/ | | |  __/ | | (_| | |
 \____|\___|_| |_|\___|_|  \__,_|_|
 */

#game_play_area {

}

#game_play_area h3 {
    margin: 0px 0px var(--gutter) 0px;
    font-size: max(12px, calc(16px * var(--scale)));
}

#game_play_area .whiteblock h3 {
    /* Borrowed from Potion Explosion */
    text-shadow: 1px 1px 1px #FFFFFF;
}

#game_play_area .bgabutton {
    padding: var(--gutter) !important;
}

#game_play_area .bgabutton_darkgray {
    cursor: not-allowed;
}

#game_play_area .whiteblock {
    border-radius: 8px;
    padding: var(--gutter);
    margin: 0px;
}

.opponent .coin, .coin.opponent {
    background-image: url('img/tmp_coin_opponent.png');
}
.coin.animated {
    position: absolute;
    z-index: 100;
}
.coin {
    background-image: url('img/tmp_coin.png');
    width: calc(var(--scale) * var(--element-scale) * 30px);
    height: calc(var(--scale) * var(--element-scale) * 30px);
    background-size: calc(var(--scale) * var(--element-scale) * 30px) calc(var(--scale) * var(--element-scale) * 30px);
    display: inline-block;
    text-align: center;
    border-radius: calc(30px * 0.5);
    box-shadow:
        calc(var(--scale) * 1px) calc(var(--scale) * 1px) calc(var(--scale) * 3px) 0px rgba(0,0,0,0.4),
        inset 0px 0px 0px calc(var(--scale) * 1px) #00000060;
}
.coin>span {
    font-weight: bold;
    font-size: calc(var(--scale) * var(--element-scale) * 20px);
    line-height: calc(var(--scale) * var(--element-scale) * 30px) !important;
    text-shadow: 0 0 calc(var(--scale) * 6px) white, 0 0 calc(var(--scale) * 6px) white, 0 0 calc(var(--scale) * 6px) white;
    color:black;
    cursor: default;
}
.current_player_is_active .coin>span {
    cursor: pointer;
}

.point {
    margin-left: var(--gutter);
    background-image: url('img/tmp_point.png');
    width: calc(var(--scale) * var(--element-scale) * 30px);
    height: calc(var(--scale) * var(--element-scale) * 30px);
    background-size: calc(var(--scale) * var(--element-scale) * 30px) calc(var(--scale) * var(--element-scale) * 30px);
    display: inline-block;
    text-align: center;
}
.point>span {
    font-weight: bold;
    font-size: calc(var(--scale) * var(--element-scale) * 20px);
    line-height: calc(var(--scale) * var(--element-scale) * 30px) !important;
    text-shadow: 0 0 calc(var(--scale) * 3px) black,0 0 calc(var(--scale) * 3px) black;
    color:white;
    cursor: default;
}

@keyframes tooltipWiggle {
    from {
        transform: perspective(40em) rotateY(-18deg) scale(0.93); /* The 0.95 makes the graphic fit the tooltip better */
        animation-timing-function: ease-in-out;
    }
    to {
        transform: perspective(40em) rotateY(-10deg) scale(0.93); /* The 0.95 makes the graphic fit the tooltip better */
        animation-timing-function: ease-in-out;
    }
}

@keyframes glow {
    from {
        box-shadow: 0 0 5px 4px #f1dec8;
    }
    to {
        box-shadow: 0 0 5px 6px #f1dec8;
    }
}

.red_border {
    animation: red_border 0.5s infinite alternate;
    z-index: 20;
}

@keyframes red_border {
    from {
        outline-color: #ff000066;
        outline-width: 3px;
        outline-style: dashed;
        outline-offset: 1px;
    }
    to {
        outline-color: #ff0000;
        outline-width: 3px;
        outline-style: dashed;
        outline-offset: 1px;
    }
}

.green_border {
    animation: green_border 0.5s infinite alternate;
    z-index: 20;
}

@keyframes green_border {
    from {
        /*box-shadow: 0 0 1px 3px #007e3b66;*/
        outline-color: #007e3b66;
        outline-width: 3px;
        outline-style: dashed;
        outline-offset: 1px;
    }
    to {
        /*box-shadow: 0 0 1px 3px #007e3b;*/
        outline-color: #007e3b;
        outline-width: 3px;
        outline-style: dashed;
        outline-offset: 1px;
    }
}

/*
 _                            _   
| |    __ _ _   _  ___  _   _| |_ 
| |   / _` | | | |/ _ \| | | | __|
| |__| (_| | |_| | (_) | |_| | |_ 
|_____\__,_|\__, |\___/ \__,_|\__|
            |___/                 
 */

#swd_wrap {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

#layout_flexbox {
    /* Use flexbox properties https://www.youtube.com/watch?v=JJSoEo8JSnc */
    display: flex;
    flex-direction: row;
    justify-content: center;
}

#wonder_column {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}

#wonder_column>div:first-child .player_wonders {
    /* Space between the two player areas with wonders, relevant in square mode where they would otherwise touch. */
    margin-bottom: var(--gutter);
}

.card_outline:empty, .card_outline.science_progress {
    box-shadow: inset 0px 0px calc(var(--scale) * 4px) calc(var(--scale) * 1px) #00000029;
    border-radius: var(--small-border-radius);
}

.progress_token_outline {
    box-shadow: inset 0px 0px calc(var(--scale) * 4px) calc(var(--scale) * 1px) #00000029;
    border-radius: calc(var(--progress-token-width) * var(--progress-token-small-scale) * 0.5);
}

#wonder_selection_container>div {
    width: calc(var(--wonder-small-scale) * var(--wonder-width));
    height: calc(var(--wonder-small-scale) * var(--wonder-height));
    float: left;
    --wonder-small-scale: calc(0.8 * var(--scale));
}

#wonder_selection_container>div:nth-of-type(1), #wonder_selection_container>div:nth-of-type(2) {
    margin-bottom: var(--gutter);
}
#wonder_selection_container>div:nth-of-type(1), #wonder_selection_container>div:nth-of-type(3) {
    margin-right: var(--gutter);
}

.current_player_is_active #wonder_selection_container .wonder {
    cursor: pointer;
}

#middle_column {
    text-align: center;

    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;

    width: calc(7 * var(--building-small-width) + 6 * 2px + 2 * var(--gutter));/* This keeps content in the middle_column, especially something like select_start_player within the allowed size. */
}

#board_column {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    flex-wrap: wrap;
}
#swd_wrap.portrait #board_column {
    /* Specific width so layout_flexbox becomes the same width as player_wonders_mobile_container_ div. */
    width: calc(220px * var(--scale));
}
#swd_wrap.square #board_column, #swd_wrap.landscape #board_column {
    /* Specific width so layout_flexbox becomes the same width as player_wonders_mobile_container_ div. */
    width: calc(225px * var(--scale));
}
/*
 ____                      _
| __ )  ___   __ _ _ __ __| |
|  _ \ / _ \ / _` | '__/ _` |
| |_) | (_) | (_| | | | (_| |
|____/ \___/ \__,_|_|  \__,_|
 */

#board_container {
    position: relative;
    display: inline-block;
    align-self: flex-end;
}

.board, #board_container {
    width: calc(var(--board-width) * var(--board-scale));
    height: calc(var(--board-height) * var(--board-scale));
}

.board {
    background-image: url('img/board.png');
    background-size: calc(var(--board-width) * var(--board-scale)) calc(var(--board-height) * var(--board-scale));
    /*border-radius: var(--small-border-radius);*/
    filter: drop-shadow(0px 0px calc(var(--scale) * 1.5px) #000000);
    position: absolute;
    display: inline-block;
}

.pawn {
    background-image: url('img/conflict_pawn.png');
    width: calc(var(--scale) * 73px);
    height: calc(var(--scale) * 26px);
    background-size: calc(var(--scale) * 73px) calc(var(--scale) * 26px);
    left: calc(var(--scale) * 50px);
    top: calc((var(--military-track-header) + (var(--conflict-pawn-position) + 9) / 18 * var(--military-track-body)) * var(--board-height) * var(--board-scale));
    /*border-radius: var(--small-border-radius);*/
    filter: drop-shadow(0px 0px calc(var(--scale) * 1.5px) #000000);
    position: absolute;
    display: inline-block;
    z-index: 3;
}



#board_progress_tokens {
    position: relative;
    top: calc(var(--board-height) * var(--board-scale) * 0.25);
    left: calc(var(--board-width) * var(--board-scale) * 0.65);
    width: calc(var(--progress-token-width) * var(--progress-token-small-scale));
    height: calc(var(--board-height) * var(--board-scale) * 0.5);
}

#board_progress_tokens>div {
    position: absolute;
    width: calc(var(--progress-token-width) * var(--progress-token-small-scale));
    height: calc(var(--progress-token-width) * var(--progress-token-small-scale));
}

#board_progress_tokens>div:nth-of-type(1) {

}

#board_progress_tokens>div:nth-of-type(2) {
    top: calc(var(--board-height) * var(--board-scale) * 0.103);
}

#board_progress_tokens>div:nth-of-type(3) {
    top: calc(var(--board-height) * var(--board-scale) * 0.205);
}

#board_progress_tokens>div:nth-of-type(4) {
    top: calc(var(--board-height) * var(--board-scale) * 0.309);
}

#board_progress_tokens>div:nth-of-type(5) {
    top: calc(var(--board-height) * var(--board-scale) * 0.407);
}


#military_tokens>div {
    position: absolute;
}

#military_tokens>div:nth-of-type(1) {
    left: calc(var(--board-width) * var(--board-scale) * 0.0775);
    top: calc(var(--board-height) * var(--board-scale) * 0.104);
}

#military_tokens>div:nth-of-type(2) {
    left: calc(var(--board-width) * var(--board-scale) * 0.095);
    top: calc(var(--board-height) * var(--board-scale) * 0.257);
}

#military_tokens>div:nth-of-type(3) {
    left: calc(var(--board-width) * var(--board-scale) * 0.095);
    top: calc(var(--board-height) * var(--board-scale) * 0.643);
}

#military_tokens>div:nth-of-type(4) {
    left: calc(var(--board-width) * var(--board-scale) * 0.0775);
    top: calc(var(--board-height) * var(--board-scale) * 0.778);
}

.military_token {
    border-radius: calc(var(--board-scale) * 10px);
    filter: drop-shadow(0px 0px calc(var(--scale) * 1.5px) #000000);
    position: relative;
    /*display: inline-block;*/
}

.military_token_2 {
    background-image: url('img/military_token_2.png');
    width: calc(var(--board-scale) * 61px);
    height: calc(var(--board-scale) * 141px);
    background-size: calc(var(--board-scale) * 61px) calc(var(--board-scale) * 141px);
}

.military_token_5 {
    background-image: url('img/military_token_5.png');
    width: calc(var(--board-scale) * 73px);
    height: calc(var(--board-scale) * 167px);
    background-size: calc(var(--board-scale) * 73px) calc(var(--board-scale) * 167px);
}

.board_player_left, .board_player_right {
    position: relative;
    display: inline-block;
    top: 40px;
}

.board_player_right {
    float: right;
}

/*
 ____             __ _                     _
|  _ \ _ __ __ _ / _| |_ _ __   ___   ___ | |
| | | | '__/ _` | |_| __| '_ \ / _ \ / _ \| |
| |_| | | | (_| |  _| |_| |_) | (_) | (_) | |
|____/|_|  \__,_|_|  \__| .__/ \___/ \___/|_|
                        |_|
 */

#draftpool_container {
    padding: var(--gutter);
    display: inline-block;
}

.draftpool {
    position: relative;
    left: var(--gutter); /* Happens to be te space we need to center the draftpool */
    margin: calc(2 * var(--gutter)) 0px calc(2.5 * var(--gutter)) 0px;

    /* Height is being set by updateDraftpool */

    /* 5px for rightmost card's shadow, else it will look too narrox. */
    width: calc(var(--draftpool-column-width) * 10 + var(--building-small-width) + calc(var(--scale) * 5px));
}

.glow {
    animation: glow 0.5s infinite alternate;
}

.draftpool_building_cost {
    position: relative;
}
.draftpool_building_cost.opponent {
    top: calc(var(--building-height) * var(--building-small-scale) * 0.73);
}
.draftpool_building_cost.me {
    top: calc(var(--building-height) * var(--building-small-scale) * 0.80);
}
.draftpool_building_cost .coin {
    --element-scale: 0.85;
}

#draftpool_actions {
    text-align: center;
    visibility: hidden;
}
#draftpool_actions>a>div {
    margin-right: var(--gutter);
}
#draftpool_actions>a {
    margin:0px;
    height: 34px;
    line-height: 34px;
    zoom: var(--scale);
}

#buttonConstructWonder {
    float: left;
}

#buttonDiscardBuilding {
    float: right;
}
#buttonDiscardBuilding .coin {
    --element-scale: calc(2.0 - var(--scale));
}
#buttonDiscardBuilding .coin>span {

}

#draftpool .column1 { left: calc(var(--draftpool-column-width) * (1 - 1)); }
#draftpool .column2 { left: calc(var(--draftpool-column-width) * (2 - 1)); }
#draftpool .column3 { left: calc(var(--draftpool-column-width) * (3 - 1)); }
#draftpool .column4 { left: calc(var(--draftpool-column-width) * (4 - 1)); }
#draftpool .column5 { left: calc(var(--draftpool-column-width) * (5 - 1)); }
#draftpool .column6 { left: calc(var(--draftpool-column-width) * (6 - 1)); }
#draftpool .column7 { left: calc(var(--draftpool-column-width) * (7 - 1)); }
#draftpool .column8 { left: calc(var(--draftpool-column-width) * (8 - 1)); }
#draftpool .column9 { left: calc(var(--draftpool-column-width) * (9 - 1)); }
#draftpool .column10 { left: calc(var(--draftpool-column-width) * (10 - 1)); }
#draftpool .column11 { left: calc(var(--draftpool-column-width) * (11 - 1)); }

#draftpool .row1 { top: calc(var(--draftpool-row-height) * (1 - 1)); }
#draftpool .row2 { top: calc(var(--draftpool-row-height) * (2 - 1)); }
#draftpool .row3 { top: calc(var(--draftpool-row-height) * (3 - 1)); }
#draftpool .row4 { top: calc(var(--draftpool-row-height) * (4 - 1)); }
#draftpool .row5 { top: calc(var(--draftpool-row-height) * (5 - 1)); }
#draftpool .row6 { top: calc(var(--draftpool-row-height) * (6 - 1)); }
#draftpool .row7 { top: calc(var(--draftpool-row-height) * (7 - 1)); }

/*
 ____  _             _           _                                  _           _   _
/ ___|| |_ __ _ _ __| |_   _ __ | | __ _ _   _  ___ _ __   ___  ___| | ___  ___| |_(_) ___  _ __
\___ \| __/ _` | '__| __| | '_ \| |/ _` | | | |/ _ \ '__| / __|/ _ \ |/ _ \/ __| __| |/ _ \| '_ \
 ___) | || (_| | |  | |_  | |_) | | (_| | |_| |  __/ |    \__ \  __/ |  __/ (__| |_| | (_) | | | |
|____/ \__\__,_|_|   \__| | .__/|_|\__,_|\__, |\___|_|    |___/\___|_|\___|\___|\__|_|\___/|_| |_|
                          |_|            |___/
 */

#select_start_player {
    display: none;
}

.current_player_is_active #swd[data-state=selectStartPlayer] #select_start_player {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#select_start_player>.action_button>img {
    margin-right: var(--gutter);
}

#select_start_player>div {
    margin: 0px var(--gutter) 0px var(--gutter);
    word-wrap: break-spaces;
    line-height: calc(18px * var(--scale));
    font-size: calc(16px * var(--scale));
    height: calc(36px * var(--scale));
    display: inline-block;
    max-width: 60%;
    font-weight: bold;
}
#select_start_player>.action_button {
    margin:0px;
    height: calc(34px * var(--scale));
    line-height: 34px;
    text-overflow: unset;
}

#buttonPlayerLeft {
    float: left;
}

#buttonPlayerRight {
    float: right;
}

/*
  ____ _                                                                      _        _                 __                       _
 / ___| |__   ___   ___  ___  ___   _ __  _ __ ___   __ _ _ __ ___  ___ ___  | |_ ___ | | _____ _ __    / _|_ __ ___  _ __ ___   | |__   _____  __
| |   | '_ \ / _ \ / _ \/ __|/ _ \ | '_ \| '__/ _ \ / _` | '__/ _ \/ __/ __| | __/ _ \| |/ / _ \ '_ \  | |_| '__/ _ \| '_ ` _ \  | '_ \ / _ \ \/ /
| |___| | | | (_) | (_) \__ \  __/ | |_) | | | (_) | (_| | | |  __/\__ \__ \ | || (_) |   <  __/ | | | |  _| | | (_) | | | | | | | |_) | (_) >  <
 \____|_| |_|\___/ \___/|___/\___| | .__/|_|  \___/ \__, |_|  \___||___/___/  \__\___/|_|\_\___|_| |_| |_| |_|  \___/|_| |_| |_| |_.__/ \___/_/\_\
                                   |_|              |___/
 */

#progress_token_from_box {
    display: none;
}
#swd[data-state=chooseProgressTokenFromBox] #progress_token_from_box {
    display: block;
}

.current_player_is_active #progress_token_from_box_container .progress_token {
    cursor: pointer;
}
#progress_token_from_box_container>div {
    display: inline-block;
    --progress-token-small-scale: calc(0.5 * var(--scale));
    width: calc(var(--progress-token-width) * var(--progress-token-small-scale));
    height: calc(var(--progress-token-height) * var(--progress-token-small-scale));
}
#progress_token_from_box_container>div:not(:last-child) {
    margin-right: var(--gutter);
}

/*
 ____  _                            _
|  _ \| | __ _ _   _  ___ _ __     / \   _ __ ___  __ _
| |_) | |/ _` | | | |/ _ \ '__|   / _ \ | '__/ _ \/ _` |
|  __/| | (_| | |_| |  __/ |     / ___ \| | |  __/ (_| |
|_|   |_|\__,_|\__, |\___|_|    /_/   \_\_|  \___|\__,_|
               |___/
 */

.player_info_sub {
    display : flex;
    align-items : center;
    justify-content: space-between;
}

.player_info {
    text-align: center;
}
.player_info.opponent {
    margin-bottom: var(--gutter) !important;
}
.player_info.me {
    margin-top: var(--gutter) !important;
}
#swd_wrap.portrait .player_info.opponent {
    border-radius:  0px 0px var(--small-border-radius) 0px;
}
#swd_wrap.portrait .player_info.me {
    border-radius: 0px var(--small-border-radius) 0px 0px;
}
#swd_wrap.square .player_info, #swd_wrap.landscape .player_info {
    border-radius: 0px var(--small-border-radius) var(--small-border-radius) 0px;
}

.player_area_name {
    position: relative;
    display: inline-block;
    width: 75%;
    text-align: center;
}
.player_area_name h3 {
    margin:0px !important;
}

.player_buildings.me {
    align-items: flex-start;
}

.player_buildings {
    min-height: calc(150px * var(--scale));

    width: calc(7 * var(--building-small-width) + 6 * 2px);
    /* Flexbox setup */
    display: flex;
    flex-direction: row;
    align-items: flex-end;
    justify-content: space-between;
}
#swd_wrap.square .player_buildings.opponent, #swd_wrap.landscape .player_buildings.opponent {
    border-radius: 0px 0px var(--small-border-radius) 0px;
}
#swd_wrap.square .player_buildings.me, #swd_wrap.landscape .player_buildings.me {
    border-radius: 0px var(--small-border-radius) 0px 0px;
}
#swd_wrap.portrait .player_buildings.opponent {
    border-radius: 0px 0px var(--small-border-radius) var(--small-border-radius);
}
#swd_wrap.portrait .player_buildings.me {
    border-radius: var(--small-border-radius) var(--small-border-radius) 0px 0px;
}

.player_building_column {
    display: flex;
    flex-direction: column;
    min-width: var(--building-small-width);
    min-height: var(--building-header-small-height);
    border-radius: var(--small-border-radius);
    background-size: var(--building-small-width) var(--building-header-small-height) !important;
    background-repeat: no-repeat !important;
    background-position: bottom !important;
    margin: 0px 1px 0px 1px;
}
.player_buildings.opponent .player_building_column {
    background-position: bottom !important;
    flex-direction: column-reverse;
}
.player_buildings.me .player_building_column {
    background-position: top !important;
}

/* Gradients for opponent */
.player_buildings.opponent .player_building_column.Brown {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#702c12+0,702c12+100&0+0,0.4+100 */
    background: linear-gradient(to bottom, rgba(112, 44, 18, 0) 0%, rgba(112, 44, 18, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.opponent .player_building_column.Grey {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#858680+0,858680+100&0+0,0.4+100 */
    background: linear-gradient(to bottom, rgba(133, 134, 128, 0) 0%, rgba(133, 134, 128, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.opponent .player_building_column.Yellow {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#f8b305+0,f8b305+100&0+0,0.4+100 */
    background: linear-gradient(to bottom, rgba(248, 179, 5, 0) 0%, rgba(248, 179, 5, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.opponent .player_building_column.Blue {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#0275aa+0,0275aa+100&0+0,0.4+100 */
    background: linear-gradient(to bottom, rgba(2, 117, 170, 0) 0%, rgba(2, 117, 170, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.opponent .player_building_column.Red {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#b7110e+0,b7110e+100&0+0,0.4+100 */
    background: linear-gradient(to bottom, rgba(183, 17, 14, 0) 0%, rgba(183, 17, 14, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.opponent .player_building_column.Green {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#027234+0,027234+100&0+0,0.4+100 */
    background: linear-gradient(to bottom, rgba(2, 114, 52, 0) 0%, rgba(2, 114, 52, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.opponent .player_building_column.Purple {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#6f488b+0,6f488b+100&0+0,0.4+100 */
    background: linear-gradient(to bottom, rgba(111, 72, 139, 0) 0%, rgba(111, 72, 139, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

/* Gradients for me */
.player_buildings.me .player_building_column.Brown {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#702c12+0,702c12+100&0+0,0.4+100 */
    background: linear-gradient(to top, rgba(112, 44, 18, 0) 0%, rgba(112, 44, 18, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.me .player_building_column.Grey {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#858680+0,858680+100&0+0,0.4+100 */
    background: linear-gradient(to top, rgba(133, 134, 128, 0) 0%, rgba(133, 134, 128, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.me .player_building_column.Yellow {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#f8b305+0,f8b305+100&0+0,0.4+100 */
    background: linear-gradient(to top, rgba(248, 179, 5, 0) 0%, rgba(248, 179, 5, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.me .player_building_column.Blue {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#0275aa+0,0275aa+100&0+0,0.4+100 */
    background: linear-gradient(to top, rgba(2, 117, 170, 0) 0%, rgba(2, 117, 170, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.me .player_building_column.Red {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#b7110e+0,b7110e+100&0+0,0.4+100 */
    background: linear-gradient(to top, rgba(183, 17, 14, 0) 0%, rgba(183, 17, 14, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.me .player_building_column.Green {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#027234+0,027234+100&0+0,0.4+100 */
    background: linear-gradient(to top, rgba(2, 114, 52, 0) 0%, rgba(2, 114, 52, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.player_buildings.me .player_building_column.Purple {
    /* Permalink - use to edit and share this gradient: https://colorzilla.com/gradient-editor/#6f488b+0,6f488b+100&0+0,0.4+100 */
    background: linear-gradient(to top, rgba(111, 72, 139, 0) 0%, rgba(111, 72, 139, 0.4) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}

.science_progress {
    order: 99;
    height: calc(var(--building-header-small-height) * 0.75) !important;
    line-height: calc(var(--building-header-small-height) * 0.75);

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    font-size: calc(14px * var(--scale));
    font-weight: bold;
    color: #006c2f;
    text-shadow: 1px 1px 1px #FFFFFF;
}
.science_progress span {
    pointer: default;
    pointer-events: none;
}

#swd_wrap.portrait .player_wonders.opponent {
    border-radius: var(--small-border-radius) var(--small-border-radius) 0px 0px;
}
#swd_wrap.portrait .player_wonders.me {
    border-radius: 0px 0px var(--small-border-radius) var(--small-border-radius);
}
#swd_wrap.square .player_wonders.opponent, #swd_wrap.landscape .player_wonders.opponent {
    border-radius: var(--small-border-radius) 0px var(--small-border-radius) var(--small-border-radius);
}
#swd_wrap.square .player_wonders.me, #swd_wrap.landscape .player_wonders.me {
    border-radius: var(--small-border-radius) var(--small-border-radius) 0px var(--small-border-radius);
}
.player_wonders .wonder_small {
    z-index: 2;
    position: absolute;
    /* To vertically center the cost: */
    display: flex;
    align-items: center;
}

.player_wonders .age_card_container {
    position: relative;
    top: calc(-10px * var(--scale));
    left: calc(103px * var(--scale));
    width: var(--building-small-width);
    height: var(--building-small-height);
}

.player_wonders .wonder_container .card_outline {
    position: absolute;
    top: calc(17px * var(--scale));
    left: calc(76px * var(--scale));
    width: var(--building-small-height);
    height: var(--building-small-width);
}

.player_wonders .red_border {
    cursor:pointer;
}

.player_wonders .age_card_container .building_small {
    position: absolute;
    transform: rotate(-90deg);
}

.player_wonder_cost {
    left: calc(var(--wonder-width) * var(--wonder-small-scale) * 0.99);
    position: relative;
    z-index: 2;
}
.player_wonder_cost .coin {
    --element-scale: 0.85;
}

#swd_wrap.square .player_wonders {
    width: calc(var(--wonder-small-scale) * var(--wonder-width) * var(--wonder-plus-age-card-scale));
    height: calc(4 * var(--wonder-small-scale) * var(--wonder-height) + 3 * var(--gutter));
}
#swd_wrap.landscape .player_wonders {
    width: calc(2 * var(--wonder-small-scale) * var(--wonder-width) * var(--wonder-plus-age-card-scale) + 1 * var(--gutter));
    height: calc(2 * var(--wonder-small-scale) * var(--wonder-height) + 1 * var(--gutter));
}
#swd_wrap.portrait .player_wonders {
    min-width: calc(4 * var(--wonder-small-scale) * var(--wonder-width) * var(--wonder-plus-age-card-scale) + 3 * var(--gutter));
    height: calc(var(--wonder-small-scale) * var(--wonder-height));
}

.player_wonders {
    position: relative;

    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    justify-content: space-between;
}

.player_wonders > div:not(:last-child) {
    margin-right: var(--gutter);
}
.player_wonders > div {
    width: calc(var(--wonder-small-scale) * var(--wonder-width) * var(--wonder-plus-age-card-scale));
    height: calc(var(--wonder-small-scale) * var(--wonder-height));
}

.player_area_progress_tokens {
    display: inline-block;
    text-align: center;
    position: relative;
}
.player_area_progress_tokens>div {
    display: inline-block;
    position: relative;
    width: calc(var(--progress-token-width) * var(--progress-token-small-scale));
    height: calc(var(--progress-token-height) * var(--progress-token-small-scale));
}
.player_area_progress_tokens>div:nth-of-type(4)>div, .player_area_progress_tokens>div:nth-of-type(5)>div, .player_area_progress_tokens>div:nth-of-type(6)>div {
    margin-bottom: calc(-12px * var(--scale));
}
.player_area_progress_tokens>div:nth-of-type(4), .player_area_progress_tokens>div:nth-of-type(5), .player_area_progress_tokens>div:nth-of-type(6) {
    position: relative;
    top: calc(-8px * var(--scale));
    margin-bottom: calc(-12px * var(--scale));
    display: none;
}

.player_area_coins {
    float: right;
    text-align: center;

    width: calc(var(--scale) * 30px);
    height: calc(var(--scale) * 30px);
}

.player_area_coins .coin {
    z-index: 105; /* So animated coins fly under it */
    position: relative; /* For the z-index to work */
}

/*
 ____  _                            _        _   _
|  _ \| | __ _ _   _  ___ _ __     / \   ___| |_(_) ___  _ __  ___
| |_) | |/ _` | | | |/ _ \ '__|   / _ \ / __| __| |/ _ \| '_ \/ __|
|  __/| | (_| | |_| |  __/ |     / ___ \ (__| |_| | (_) | | | \__ \
|_|   |_|\__,_|\__, |\___|_|    /_/   \_\___|\__|_|\___/|_| |_|___/
               |___/
 */

.action_construct {
    background-image: url('img/tmp_construct_building_icon.png');
    /*background-position: -0px -170px;*/
    width: 82px;
    height: 32px;
}

.action_wonder {
    background-image: url('img/tmp_construct_wonder_icon.png');
    width: 45px;
    height: 34px;
}

.action_discard {
    background-image: url('img/icons.png');
    background-position: -120px -170px;
    width: 40px;
    height: 40px;
}

.action_button * {
    display: inline-block;
    vertical-align: middle;
    pointer-events: none;
}

/*
 ____        _ _     _ _
| __ ) _   _(_) | __| (_)_ __   __ _ ___
|  _ \| | | | | |/ _` | | '_ \ / _` / __|
| |_) | |_| | | | (_| | | | | | (_| \__ \
|____/ \__,_|_|_|\__,_|_|_| |_|\__, |___/
                               |___/
 */

.building {
    width: var(--building-width);
    height: var(--building-height);
    background-image: url('img/buildings.jpg');
    border-radius: 14px;
    box-shadow:
        calc(var(--scale) * 5px) calc(var(--scale) * 5px) calc(var(--scale) * 5px) 0px rgba(0,0,0,0.4),
        inset 0px 0px 0px calc(var(--scale) * 1px) #00000060;

    /* Temporary?: */
    display: inline-block;
    position: inherit;
}

.building_header_small {
    width: var(--building-small-width);
    height: var(--building-header-small-height);
    background-size: calc(var(--building-spritesheet-width) * var(--building-small-scale)) calc(var(--building-spritesheet-height) * var(--building-small-scale));
    border-radius: var(--small-border-radius);
    box-shadow:
            0px 0px calc(var(--scale) * 3px) calc(var(--scale) * 1px) rgba(0,0,0,0.4),
            inset 0px 0px 0px calc(var(--scale) * 0.5px) #00000060;
    display: block;
    position: relative; /* For the sliding animation (draftpool to player area) to work */
    z-index: 15; /* So they are on top of the draftpool buildings during animation */
}

.building_header_small_container {
    width: var(--building-small-width);
    height: var(--building-header-small-height);
    display: block;
}

/* Put some margin between borders, mostly to prevent misclicks on mobile. Doesn't include current_player_is_active / state so the position stays the same during the animation.
Because of reversing the flexbox order for the opponent there are 2 different rules.*/
.player_buildings.me .player_building_column.red_border .building_header_small_container:not(:last-child) {
    margin-bottom: calc(2 * var(--gutter));
}
.player_buildings.opponent .player_building_column.red_border .building_header_small_container:not(:first-child) {
    margin-bottom: calc(2 * var(--gutter));
}

.current_player_is_active #swd[data-state=chooseOpponentBuilding] .player_building_column.red_border .building_header_small {
    cursor: pointer;
}

.current_player_is_active #swd[data-state=playerTurn] #draftpool .building_small.available,
.current_player_is_active #swd[data-state=client_useAgeCard] #draftpool .building_small.available
{
    cursor: pointer;
}

.building_small {
    width: var(--building-small-width);
    height: var(--building-small-height);
    background-size: calc(var(--building-spritesheet-width) * var(--building-small-scale)) calc(var(--building-spritesheet-height) * var(--building-small-scale));
    border-radius: var(--small-border-radius);
    box-shadow:
        0px 0px calc(var(--scale) * 3px) calc(var(--scale) * 1px) rgba(0,0,0,0.4),
        inset 0px 0px 0px calc(var(--scale) * 0.5px) #00000060;
    text-align: center;
    backface-visibility: hidden;
}

.age1_back { background-position: -300% -700%; }
.age2_back { background-position: -400% -700%; }
.age3_back { background-position: -500% -700%; }
.guild_back { background-position: -600% -700%; }

/*
__        __              _
\ \      / /__  _ __   __| | ___ _ __ ___
 \ \ /\ / / _ \| '_ \ / _` |/ _ \ '__/ __|
  \ V  V / (_) | | | | (_| |  __/ |  \__ \
   \_/\_/ \___/|_| |_|\__,_|\___|_|  |___/
 */

.wonder_container {
    display: inline-block;
    position: relative; /* Without this the wonder won't slide properly */
}

.wonder {
    width: var(--wonder-width);
    height: var(--wonder-height);
    background-image: url('img/wonders.jpg');
    border-radius: var(--wonder-border-radius);
    box-shadow:
        calc(var(--scale) * 5px) calc(var(--scale) * 5px) calc(var(--scale) * 5px) 0px rgba(0,0,0,0.4),
        inset 0px 0px 0px 1px #00000060;

    /* Temporary: */
    display: inline-block;
    position: inherit;
}

.wonder_small {
    width: calc(var(--wonder-width) * var(--wonder-small-scale));
    height: calc(var(--wonder-height) * var(--wonder-small-scale));
    background-size: calc(var(--wonder-spritesheet-width) * var(--wonder-small-scale)) calc(var(--wonder-spritesheet-height) * var(--wonder-small-scale));
    border-radius: var(--small-border-radius);
    box-shadow:
            0px 0px calc(var(--scale) * 3px) calc(var(--scale) * 1px) rgba(0,0,0,0.4),
            inset 0px 0px 0px calc(var(--scale) * 0.5px) #00000060;
}

/*
 ____                                      _____     _
|  _ \ _ __ ___   __ _ _ __ ___  ___ ___  |_   _|__ | | _____ _ __  ___
| |_) | '__/ _ \ / _` | '__/ _ \/ __/ __|   | |/ _ \| |/ / _ \ '_ \/ __|
|  __/| | | (_) | (_| | | |  __/\__ \__ \   | | (_) |   <  __/ | | \__ \
|_|   |_|  \___/ \__, |_|  \___||___/___/   |_|\___/|_|\_\___|_| |_|___/
                 |___/
 */

.current_player_is_active #swd[data-state=chooseProgressToken] #board_progress_tokens .progress_token_small {
    cursor: pointer;
}

.progress_token {
    width: var(--progress-token-width);
    height: var(--progress-token-height);
    background-image: url('img/progress_tokens.jpg');
    border-radius: calc(var(--progress-token-width) * 0.5);
    box-shadow:
        calc(var(--scale) * 5px) calc(var(--scale) * 5px) calc(var(--scale) * 5px) 0px rgba(0,0,0,0.4),
        inset 0px 0px 0px calc(var(--scale) * 1px) #00000060;

    /* Temporary: */
    display: inline-block;
    position: inherit;
}

.progress_token_small {
    position: relative;
    z-index: 5;
    width: calc(var(--progress-token-width) * var(--progress-token-small-scale));
    height: calc(var(--progress-token-height) * var(--progress-token-small-scale));
    background-size: calc(var(--progress-token-spritesheet-width) * var(--progress-token-small-scale)) calc(var(--progress-token-spritesheet-height) * var(--progress-token-small-scale));
    border-radius: calc(var(--progress-token-width) * var(--progress-token-small-scale) * 0.5);
    box-shadow:
            0px 0px calc(var(--scale) * 3px) calc(var(--scale) * 1px) rgba(0,0,0,0.4),
            inset 0px 0px 0px calc(var(--scale) * 0.5px) #00000060;
}

.linked_building_icon {
    width: var(--linked-building-icon-width);
    height: var(--linked-building-icon-height);
    background-image: url('img/linked-building-icons.jpg');
    position: absolute;
    border-radius: calc(var(--scale) * 3px);
    display: inline-block;
    box-shadow:
        calc(var(--scale) * 3px) calc(var(--scale) * 3px) calc(var(--scale) * 3px) 0px rgba(0,0,0,0.4),
        inset 0px 0px 0px calc(var(--scale) * 0.5px) #00000060;
}

.linked_building_icon_small {
    width: calc(var(--linked-building-icon-width) * var(--linked-building-icon-small-scale));
    height: calc(var(--linked-building-icon-height) * var(--linked-building-icon-small-scale));
    background-size: calc(var(--linked-building-icon-spritesheet-width) * var(--linked-building-icon-small-scale)) calc(var(--linked-building-icon-spritesheet-height) * var(--linked-building-icon-small-scale));
    border-radius: calc(var(--scale) * 2px);
    left: calc(var(--building-small-width) * 0.55);
    top: calc(var(--scale) * 18px);
    z-index: 2;
    box-shadow:
        calc(var(--scale) * 1px) calc(var(--scale) * 1px) calc(var(--scale) * 1px) 0px rgba(0,0,0,0.3),
        inset 0px 0px 0px calc(var(--scale) * 0.5px) #00000060;
}
.opponent .linked_building_icon_small {
    top: calc(var(--scale) * -7px);
}

/*
 ____  _                       _          _                     _
|  _ \(_)___  ___ __ _ _ __ __| | ___  __| |   ___ __ _ _ __ __| |___
| | | | / __|/ __/ _` | '__/ _` |/ _ \/ _` |  / __/ _` | '__/ _` / __|
| |_| | \__ \ (_| (_| | | | (_| |  __/ (_| | | (_| (_| | | | (_| \__ \
|____/|_|___/\___\__,_|_|  \__,_|\___|\__,_|  \___\__,_|_|  \__,_|___/
 */

#discarded_cards_whiteblock {
    margin-top: var(--gutter) !important;
    margin-left: auto !important;
    margin-right: auto !important;
    box-sizing: border-box;
}

#discarded_cards_container {
    margin: 0px calc(0px - var(--gutter)) calc(0px - var(--gutter)) 0px;
}
#discarded_cards_container div {
    position: relative !important;
    display: inline-block;
    width: var(--building-small-width);
    height: var(--building-small-height);
    margin: 0px var(--gutter) var(--gutter) 0px;
}

.current_player_is_active #swd[data-state=chooseDiscardedBuilding] #discarded_cards_container .building_small {
    cursor: pointer;
}

.discarded_cards_cursor {
    display: none !important;
}

/*
 _____           _ _   _
|_   _|__   ___ | | |_(_)_ __  ___
  | |/ _ \ / _ \| | __| | '_ \/ __|
  | | (_) | (_) | | |_| | |_) \__ \
  |_|\___/ \___/|_|\__|_| .__/|___/
                        |_|
 */

.swd_tooltip {
    zoom: var(--scale);
    width: calc(700px);
    display: block;
}
.swd_tooltip * {
    zoom: 1;
}

.swd_tooltip li {
    list-style: inside;
}
.building_tooltip .cardinfos {
    min-height: var(--building-height);
}
.wonder_tooltip .cardinfos {
    min-height: var(--wonder-height);
}
.tooltipWiggle {
    animation: tooltipWiggle 2s infinite alternate;
}